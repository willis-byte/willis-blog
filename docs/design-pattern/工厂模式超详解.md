**XDS is not recommended as the storage for non-business configurations.**
**This is because XDS has a large user base and can experience stability issues due to long-running queries.**
**To address staleness concerns and reduce our reliance on XDS, we developed the Data Config Service to isolate this functionality.**
Additionally, **the XDS client is relatively heavyweight with numerous dependencies, which can introduce vulnerabilities inherent to XDS itself.**

---

Letâ€™s discuss the core technical stack:
**We selected PostgreSQL (PG) as the database for our Data Config Service.**
PG is **an** open-source, **widely adopted** object-relational database that **natively supports real-time cluster high availability (HA) and scaling operations with zero overhead, ensuring smooth failover and efficient distributed cluster management.**
**Within our HABC system, we already have a mature HA solution called PGHA, which is used across multiple teams (e.g., Trader Report, River) as a cluster-based HA solution.**
PGHA **can automatically trigger** a failover when the primary database **goes offline** and provides **a robust endpoint for managing database roles, access permissions, and more.**
**This simplifies our HA setup and aligns with our operational needs, so we use PGHA for the data persistence layer.**

---

**In terms of access architecture**, the Data Config Service **follows** a client-server model:
- **Server Side**: It **supports multi-instance deployment and horizontal scaling**, allowing the number of service instances **to be adjusted based on throughput demands**.
- **Client Integration**: Clients only need to import the client dependency **to perform configuration operations (e.g., updates, queries) via encapsulated generic methods**.
  All internal interactions **are handled through RESTful APIs, which minimizes the introduction of unnecessary dependencies and reduces vulnerability risks**.
- **Lightweight Client**: The client **is designed to be** lightweight.
  It **does not require custom SQL for queries; instead, it** calls common core methods.
  **For configuration change notifications**, we use **Server-Sent Events (SSE), which rely on long-lived HTTP connections.**
  **When a configuration is updated**, the server **proactively notifies subscribed clients.**
  Clients **never directly connect to the database; all operations are performed internally via RESTful APIs, making this process completely transparent to the client.**
  **Overall**, the **client interaction pattern** is simple and **similar to** the XDS client.

---

Additionally, **we have invested time in streamlining the onboarding process to prevent unregulated direct database access by clients.**
**We established an onboarding standard to ensure configuration maintainability:**
1.  We create configuration tables **with either key-value pairs or custom fields as needed**.
2.  Clients only need **to follow templates to generate DDL scripts for table creation**.
3.  The **first** step **is to prepare** the DDL script, **which is then executed automatically via Flyway**.

**Flyway** is an open-source database migration and version control tool.

After creating the table via Flyway, we also need **to create entity classes that extend the specified base classes**.
**Once these steps are completed, the onboarding process is finalized.**
We can then **perform any desired queries or updates**.
**This solution also supports querying historical configuration changes.**

That concludes our technical overview.
